<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Brand Voice Report</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://api.fontshare.com/v2/css?f[]=satoshi@700,500,400&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css?v={{ css_version }}">
    <link rel="stylesheet" href="/static/css/dark-theme.css?v={{ css_version }}">

    <style>
        .trait-badge {
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 2rem;
            display: inline-block;
        }
        .primary-trait {
            background-color: var(--text-secondary);
            color: var(--text-primary);
        }
        .secondary-trait {
            background-color: var(--card-bg-alt);
            color: var(--text-primary);
        }
        .avoid-trait {
            background-color: var(--error-color);
            color: var(--text-primary);
        }
        .primary-emotion {
            background-color: var(--text-secondary);
            color: var(--text-primary);
        }
        .secondary-emotion {
            background-color: var(--card-bg-alt);
            color: var(--text-primary);
        }
        .scale-container {
            height: 2rem;
            background-color: var(--card-bg-alt);
            border-radius: 1rem;
            position: relative;
            margin: 1rem 0;
        }
        .scale-value {
            height: 100%;
            background-color: var(--text-secondary);
            border-radius: 1rem;
            position: absolute;
            top: 0;
            left: 0;
        }
        .vocabulary-term {
            background-color: var(--card-bg-alt);
            border-radius: 0.25rem;
            padding: 0.25rem 0.5rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            display: inline-block;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        .example-copy {
            background-color: var(--card-bg);
            border-left: 0.25rem solid var(--text-secondary);
            padding: 1rem;
            margin: 1rem 0;
            color: var(--text-primary);
        }
        .section-header {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }
        @media print {
            body {
                background-color: white !important;
                color: black !important;
            }
            .container {
                max-width: 100% !important;
                width: 100% !important;
            }
            .card {
                border: 1px solid #ddd !important;
                box-shadow: none !important;
                background-color: white !important;
            }
            .card-header {
                background-color: #f8f9fa !important;
                color: #333 !important;
            }
            .text-white, .text-primary {
                color: #333 !important;
            }
            .progress {
                border: 1px solid #ddd !important;
            }
            .progress-bar {
                background-color: #6c757d !important;
            }
            .badge {
                background-color: #6c757d !important;
                color: white !important;
            }
            .btn {
                display: none !important;
            }
            .no-print {
                display: none !important;
            }
            .trait-badge, .primary-trait, .secondary-trait, .primary-emotion, .secondary-emotion {
                background-color: #6c757d !important;
                color: white !important;
            }
            .scale-container {
                background-color: #eee !important;
            }
            .scale-value {
                background-color: #6c757d !important;
            }
            .vocabulary-term {
                background-color: #f8f9fa !important;
                color: #333 !important;
                border: 1px solid #ddd !important;
            }
            .example-copy {
                background-color: #f8f9fa !important;
                border-left: 0.25rem solid #6c757d !important;
                color: #333 !important;
            }
            .section-header {
                border-bottom: 1px solid #ddd !important;
                color: #333 !important;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar (hidden when printing) -->
    <nav class="navbar navbar-expand-lg navbar-dark no-print mb-4">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('home') }}">
                <img src="https://res.cloudinary.com/dkl8kiemy/image/upload/v1746752550/Cuttable-logo-1_jj7ou7.webp" alt="Brand Voice Codifier" height="30">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('home') }}">
                            <i class="fas fa-home me-1"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('results') }}">
                            <i class="fas fa-chart-bar me-1"></i> Results
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('document_upload') }}">
                            <i class="fas fa-file-upload me-1"></i> Document Upload
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('brand_interview') }}">
                            <i class="fas fa-comments me-1"></i> Brand Interview
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('web_scraper') }}">
                            <i class="fas fa-globe me-1"></i> Web Scraper
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('api_settings') }}">
                            <i class="fas fa-cogs me-1"></i> API Settings
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header card-header-feature">
                        <h1 class="h3 mb-0">Brand Voice Codifier</h1>
                        <h2 class="h5 mb-0">Comprehensive Brand Voice Report</h2>
                    </div>
                    <div class="card-body">
                        <p class="lead">Generated on: {{ timestamp }}</p>

                        <div class="d-flex justify-content-end no-print">
                            <a href="{{ url_for('results') }}" class="btn btn-outline-secondary me-2">
                                <i class="fas fa-arrow-left me-2"></i> Back to Results
                            </a>
                            <button onclick="window.print()" class="btn btn-outline-secondary">
                                <i class="fas fa-print me-2"></i> Print Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Executive Summary</h3>
                    </div>
                    <div class="card-body">
                        <p>This report outlines the key parameters that define your brand's unique voice. Use these guidelines to maintain consistency across all communications.</p>

                        <div class="row mt-3">
                            <div class="col-md-4">
                                <h5 class="text-primary">Personality</h5>
                                <p>
                                    {% for trait in brand_parameters.personality.primary_traits %}
                                        {{ trait|capitalize }}{% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </p>
                            </div>
                            <div class="col-md-4">
                                <h5 class="text-primary">Emotional Tone</h5>
                                <p>
                                    {% for emotion in brand_parameters.emotional_tone.primary_emotions %}
                                        {{ emotion|capitalize }}{% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </p>
                            </div>
                            <div class="col-md-4">
                                <h5 class="text-primary">Formality Level</h5>
                                <p>
                                    {% if brand_parameters.formality.level <= 3 %}
                                        Very Casual
                                    {% elif brand_parameters.formality.level <= 5 %}
                                        Casual
                                    {% elif brand_parameters.formality.level <= 7 %}
                                        Neutral
                                    {% elif brand_parameters.formality.level <= 9 %}
                                        Formal
                                    {% else %}
                                        Very Formal
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Brand Personality</h3>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <h5 class="text-primary">Primary Traits</h5>
                            <div class="mb-2">
                                {% if brand_parameters.personality.primary_traits %}
                                    {% for trait in brand_parameters.personality.primary_traits %}
                                        <span class="trait-badge primary-trait">{{ trait|capitalize }}</span>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No primary traits defined</p>
                                {% endif %}
                            </div>
                        </div>

                        <div class="mb-3">
                            <h5 class="text-primary">Secondary Traits</h5>
                            <div class="mb-2">
                                {% if brand_parameters.personality.secondary_traits %}
                                    {% for trait in brand_parameters.personality.secondary_traits %}
                                        <span class="trait-badge secondary-trait">{{ trait|capitalize }}</span>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No secondary traits defined</p>
                                {% endif %}
                            </div>
                        </div>

                        <div>
                            <h5 class="text-primary">Traits to Avoid</h5>
                            <div>
                                {% if brand_parameters.personality.traits_to_avoid %}
                                    {% for trait in brand_parameters.personality.traits_to_avoid %}
                                        <span class="trait-badge avoid-trait">{{ trait|capitalize }}</span>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No traits to avoid defined</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Emotional Tone</h3>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <h5 class="text-primary">Primary Emotions</h5>
                            <div class="mb-2">
                                {% if brand_parameters.emotional_tone.primary_emotions %}
                                    {% for emotion in brand_parameters.emotional_tone.primary_emotions %}
                                        <span class="trait-badge primary-emotion">{{ emotion|capitalize }}</span>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No primary emotions defined</p>
                                {% endif %}
                            </div>
                        </div>

                        <div class="mb-3">
                            <h5 class="text-primary">Secondary Emotions</h5>
                            <div class="mb-2">
                                {% if brand_parameters.emotional_tone.secondary_emotions %}
                                    {% for emotion in brand_parameters.emotional_tone.secondary_emotions %}
                                        <span class="trait-badge secondary-emotion">{{ emotion|capitalize }}</span>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No secondary emotions defined</p>
                                {% endif %}
                            </div>
                        </div>

                        <div class="mb-3">
                            <h5 class="text-primary">Emotional Intensity</h5>
                            <div class="scale-container">
                                <div class="scale-value" style="width: {{ brand_parameters.emotional_tone.intensity * 10 }}%;"></div>
                            </div>
                            <div class="scale-labels">
                                <span>Subtle</span>
                                <span>Moderate</span>
                                <span>Intense</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Formality</h3>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <h5 class="text-primary">Formality Level</h5>
                            <div class="scale-container">
                                <div class="scale-value" style="width: {{ brand_parameters.formality.level * 10 }}%;"></div>
                            </div>
                            <div class="scale-labels">
                                <span>Very Casual</span>
                                <span>Neutral</span>
                                <span>Very Formal</span>
                            </div>
                        </div>
                        <div class="mb-3">
                            <h5 class="text-primary">Context Variations</h5>
                            {% if brand_parameters.formality.context_variations %}
                                <ul class="text-white">
                                    {% for context, level in brand_parameters.formality.context_variations.items() %}
                                        <li><strong>{{ context|capitalize }}:</strong> {{ level }}</li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <p class="text-muted">No context variations defined</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Communication Style</h3>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <h5 class="text-primary">Storytelling Preference</h5>
                            <div class="scale-container">
                                <div class="scale-value" style="width: {{ brand_parameters.communication_style.storytelling_preference * 10 }}%;"></div>
                            </div>
                            <div class="scale-labels">
                                <span>Very Direct</span>
                                <span>Balanced</span>
                                <span>Very Narrative</span>
                            </div>
                        </div>
                        <div class="mb-3">
                            <h5 class="text-primary">Sentence Structure</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Length:</strong>
                                        {{ 'Very Long' if brand_parameters.communication_style.sentence_structure.length_preference > 8 else 'Long' if brand_parameters.communication_style.sentence_structure.length_preference > 6 else 'Medium' if brand_parameters.communication_style.sentence_structure.length_preference > 4 else 'Short' if brand_parameters.communication_style.sentence_structure.length_preference > 2 else 'Very Short' }}
                                    </p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Complexity:</strong>
                                        {{ 'Very Complex' if brand_parameters.communication_style.sentence_structure.complexity_preference > 8 else 'Complex' if brand_parameters.communication_style.sentence_structure.complexity_preference > 6 else 'Moderate' if brand_parameters.communication_style.sentence_structure.complexity_preference > 4 else 'Simple' if brand_parameters.communication_style.sentence_structure.complexity_preference > 2 else 'Very Simple' }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Vocabulary</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="text-primary">Preferred Terms</h5>
                                <div class="d-flex flex-wrap">
                                    {% for term in brand_parameters.vocabulary.preferred_terms %}
                                        <span class="badge bg-secondary m-1">{{ term }}</span>
                                    {% else %}
                                        <p class="text-muted">No preferred terms defined</p>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h5 class="text-primary">Restricted Terms</h5>
                                <div class="d-flex flex-wrap">
                                    {% for term in brand_parameters.vocabulary.restricted_terms %}
                                        <span class="badge bg-danger m-1">{{ term }}</span>
                                    {% else %}
                                        <p class="text-muted">No restricted terms defined</p>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Example Copy</h3>
                    </div>
                    <div class="card-body">
                        <div class="card mb-4">
                            <div class="card-body">
                                <blockquote class="blockquote">
                                    <p>{{ example_copy | nl2br | safe }}</p>
                                </blockquote>
                            </div>
                        </div>
                        <p class="text-muted">This example demonstrates how your brand voice parameters translate into actual copy.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="h5 mb-0">Export Options</h3>
                    </div>
                    <div class="card-body no-print">
                        <div class="d-flex flex-wrap gap-2">
                            <button class="btn btn-outline-secondary" onclick="window.print()">
                                <i class="fas fa-print me-2"></i> Print Report
                            </button>
                            <a href="{{ url_for('export', format='json') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-download me-2"></i> Download JSON
                            </a>
                            <a href="{{ url_for('results') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i> Back to Results
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="text-center mt-5 mb-3">
            <p class="text-muted">Generated by Brand Voice Codifier</p>
            <p class="text-muted small">© {{ current_year }} Brand Voice Codifier. All rights reserved.</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js?v={{ css_version }}"></script>
</body>
</html>
